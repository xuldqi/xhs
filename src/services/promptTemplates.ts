import type { SectionTemplate } from '@/types'

/**
 * 图像分析提示词
 */
export const IMAGE_ANALYSIS_PROMPT = `
请分析这张小红书主页截图，提取以下信息并以JSON格式返回：

{
  "username": "账号名称",
  "followerCount": 粉丝数（数字）,
  "postCount": 发布笔记数（数字）,
  "contentCategory": "内容类别（如：美妆、穿搭、美食、旅行、知识分享等）",
  "recentPosts": [
    {
      "title": "笔记标题",
      "likes": 点赞数,
      "comments": 评论数,
      "imageUrl": ""
    }
  ],
  "analysisDate": "当前日期"
}

重要提示：
1. 小红书主页的数字顺序是：【关注数】【粉丝数】【获赞与收藏】
2. followerCount 是第二个数字（粉丝数），不是第一个数字（关注数）
3. 例如：如果看到 "0 关注 5 粉丝"，那么 followerCount 应该是 5，不是 0
4. 如果无法识别某些信息，请用合理的默认值
5. followerCount 和 postCount 必须是数字
6. contentCategory 要准确判断内容类型
7. 只返回JSON，不要有其他文字
`

/**
 * 12个部分的内容生成模板
 */
export const SECTION_TEMPLATES: SectionTemplate[] = [
  {
    id: 1,
    title: '账号诊断',
    promptTemplate: `
分析这个小红书账号的现状，给出实用建议：

账号：{username}
粉丝：{followerCount}
笔记数：{postCount}
类别：{contentCategory}

输出格式要求（严格遵守）：
1. 必须使用卡片化格式，每个要点用 emoji 开头（✅⚠️💡📊📅🎯等）
2. 格式：emoji + 空格 + 标题（不要用**加粗**）
3. 标题下方必须用列表展开细节（用 "- " 开头）
4. 避免"建议"、"推荐"等AI味重的词，直接说做法
5. 不要使用Markdown标题（不要用##或###）

示例格式：
✅ 账号优势
- 内容垂直度高，定位清晰
- 粉丝互动率达到 8.5%
- 发布时间稳定

⚠️ 需要改进
- 封面图缺乏统一风格
- 标题吸引力不足
- 发布频率不稳定

📊 涨粉预测
- 难度等级：中等
- 预计时间：2-3个月达到1000粉

语气要求：像朋友聊天，不要太正式
`,
    requiredData: ['username', 'followerCount', 'postCount', 'contentCategory'],
    format: 'text'
  },
  {
    id: 2,
    title: '起号三天计划（Day 1-3详细步骤）',
    promptTemplate: `
为账号"{username}"（{contentCategory}类别）制定起号3天计划。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（📅💡🎯📝🎨💰等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

输出内容（卡片化）：📅 Day 1 - 账号优化
- 具体步骤1
- 具体步骤2

📅 Day 2 - 内容准备
- 具体步骤1
- 具体步骤2

📅 Day 3 - 发布引流
- 具体步骤1
- 具体步骤2

💡 对标账号关键词
- 关键词1
- 关键词2

🎯 大字报选题示例
- 标题示例1
- 标题示例2

📝 改编方法
- 70%抄什么
- 30%改什么

🎨 封面制作要点
- 具体参数和要求

💰 薯条投放策略
- 投放时机
- 金额：5元
- 预期效果

要求：每个卡片独立，内容具体可执行
`,
    requiredData: ['username', 'contentCategory'],
    format: 'mixed'
  },
  {
    id: 3,
    title: '对标账号拆解',
    promptTemplate: `
为"{contentCategory}"类别账号提供对标账号拆解方法。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（🎯📊💡✅等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

输出内容（卡片化）：🎯 对标账号特征
- 粉丝量：当前的10倍左右
- 内容风格：具体描述
- 更新频率：具体频率

📊 18维度拆解清单
- 内容层（6个维度）
- 视觉层（6个维度）
- 账号层（6个维度）

💡 重点模仿的5个细节
- 细节1：具体说明
- 细节2：具体说明
- 细节3：具体说明

✅ 如何找对标账号
- 搜索关键词
- 筛选标准
- 分析方法

要求：每个维度都要具体，可直接对照检查
`,
    requiredData: ['contentCategory'],
    format: 'mixed'
  },
  {
    id: 4,
    title: '内容规划',
    promptTemplate: `
为"{username}"（{contentCategory}类别）制定内容规划（目标1000粉）。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（📅🎯⏰📊🔥💡等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）
4. 不要用**加粗**，直接写文字

示例格式：

📅 分周内容规划表
- Week 1-2：基础内容｜3篇/周｜目标100粉
- Week 3-4：进阶内容｜4篇/周｜目标300粉

🎯 具体选题示例
- 第一周选题1：具体标题（包含数字、情绪词）
- 第一周选题2：具体标题（结合{contentCategory}痛点）

⏰ 最佳发布时间
- 工作日：7:00-9:00、12:00-13:00、19:00-22:00
- 周末：10:00-12:00、15:00-17:00

📊 内容类型配比
- 干货类 40%
- 教程类 30%
- 互动类 30%

重要：选题标题要具体，不要用"XXX干货"这种通用格式！
`,
    requiredData: ['username', 'followerCount', 'contentCategory'],
    format: 'table'
  },
  {
    id: 5,
    title: '爆款笔记公式',
    promptTemplate: `
为"{contentCategory}"类别提供爆款笔记公式。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（📝🎨📄💡✅等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

示例格式：

📝 标题公式（6种类型）
- 数字型：5个让你{contentCategory}的神器 | 新手3天入门
- 疑问型：为什么你的{contentCategory}总是失败？
- 对比型：普通人 VS 高手，差在哪里？
- 情绪型：太绝了！这个方法让我省了50%时间
- 悬念型：这个秘密我藏了2年，今天免费告诉你
- 干货型：{contentCategory}实操指南 | 保存就能用

🎨 封面设计规范
- 布局：上半部图片 + 下半部文字，黄金分割
- 配色：主色调 + 对比色，3种颜色内
- 字体：标题 32-40px 加粗，副标题 18-24px

📄 正文结构模板
- 开头：痛点/场景导入，3句话内吸引注意
- 中间：分点3-5个要点，每个配图或案例
- 结尾：总结 + 互动引导（提问或请求点赞）

💡 关键要点
- 每200字就要有一个视觉高潮（图片/emoji/加粗）
- 前3秒必须抓住注意力，否则会被划走
- 每篇笔记必须有明确的价值感（能学到/能应用）

要求：每个公式都要可直接套用，给出具体示例
`,
    requiredData: ['contentCategory'],
    format: 'mixed'
  },
  {
    id: 6,
    title: '冷启动技巧',
    promptTemplate: `
提供小红书冷启动的实操技巧。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（⏰💡📊✅🔥等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

示例格式：

⏰ 发布黄金时间
- 工作日：早上7:00-9:00（通勤时间）
- 中午：12:00-13:00（午休时间）
- 晚上：19:00-22:00（高峰期）

💡 发布后1小时内必做动作
- 0-5分钟：立即回复所有评论，增加互动权重
- 5-15分钟：去3个同类型账号点赞评论，吸引流量
- 15-30分钟：搜索相关话题，去热门笔记下发有价值评论
- 30-60分钟：监控数据，决定是否投薯条

📊 薯条投放策略
- 5元测试：1小时内曝光<200，投基础流量测试反馈
- 10元加热：互动率>5%，点赞收藏比>1:3，加速流量
- 100元爆款：2小时内点赞>50，评论>20，有爆款潜力

✅ 评论区运营技巧
- 留钩子：评论区第一条自己发，提问或补充信息
- 秒回：新评论出现5分钟内回复，提升活跃度
- 引导互动：回复时抛出新问题，让用户继续讨论

要求：每个技巧都要具体可执行，包含具体时间和数据标准
`,
    requiredData: [],
    format: 'mixed'
  },
  {
    id: 7,
    title: '每日固定动作',
    promptTemplate: `
制定小红书运营者的每日固定动作清单。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（🌅🌞🌙⏰📱💡等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

示例格式：

🌅 早上（7:00-9:00）
- 刷10分钟同领域账号，收集选题灵感
- 回复昨晚的所有评论和私信（15分钟）
- 检查昨天笔记数据，记录表现最好的内容

🌞 中午（12:00-14:00）
- 发布当天的笔记（提前准备好）
- 发布后立即互动30分钟（回评论、点赞同类账号）

🌙 晚上（19:00-22:00）
- 准备明天的内容素材（选题+文案+配图）
- 分析今日数据，调整优化方向
- 睡前回复所有新评论

要求：每个任务都要具体可执行，标注时间分配
`,
    requiredData: [],
    format: 'checklist'
  },
  {
    id: 8,
    title: '数据复盘模板',
    promptTemplate: `
提供数据复盘模板和方法。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（📊📈📉✅⚠️💡等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

示例格式：

📊 每周复盘表格
- 本周目标：发布5篇笔记，涨粉100人
- 实际完成：发布4篇笔记，涨粉75人
- 差距分析：少发1篇，涨粉差25人（完成75%）
- 原因分析：周三临时有事，未按计划发布

📈 核心数据指标
- 曝光量：单篇平均曝光数，目标>1000
- 互动率：（点赞+收藏+评论）/曝光量，目标>8%
- 涨粉率：新增粉丝/曝光量，目标>3%
- 完播率：视频类内容，目标>60%
- 转化率：引流到私域的比例，目标>5%

💡 常见问题优化方向
- 曝光低：优化标题和封面，增加话题标签
- 互动少：内容价值不足，或缺少互动引导
- 涨粉慢：内容不够垂直，或缺少关注理由

要求：提供可直接使用的表格模板和具体数据标准
`,
    requiredData: [],
    format: 'table'
  },
  {
    id: 9,
    title: '避坑指南',
    promptTemplate: `
提供小红书运营的避坑指南。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（⚠️❌✅💡🔥等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

示例格式：

⚠️ 禁止操作（后果严重）
- 买粉买赞：会被限流，严重者封号
- 搬运抄袭：侵权投诉，笔记下架
- 频繁删改：降低账号权重，影响推荐
- 违规引流：留微信QQ直接封号
- 过度营销：每篇都打广告会被降权

✅ 加分项（提升效果）
- 固定发布时间：养成用户阅读习惯，提升打开率
- 原创高清图片：提升专业度，增加推荐权重
- 积极互动回复：提升账号活跃度，增加曝光
- 善用话题标签：精准匹配流量池，提升曝光
- 持续更新频率：算法更喜欢活跃账号

要求：每条都要说明具体后果或效果
`,
    requiredData: [],
    format: 'text'
  },
  {
    id: 10,
    title: '变现路径规划',
    promptTemplate: `
为"{contentCategory}"类别账号规划变现路径。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（📊💡💥💰🎯等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

示例格式：

📊 变现路径规划表
- 0-500粉：接小单广告、互推导流 | 预估收入00-500元/月
- 500-1000粉：品牌合作、知识付费 | 预估收入500-2000元/月
- 1000-5000粉：广告接单、带货分成 | 预估收入2000-8000元/月
- 5000+粉：品牌代言、直播带货 | 预估收入8000-30000元/月

💥 当前可立即启动（{followerCount}粉丝）
- 加入{contentCategory}领域互推群，互相导流
- 开通小红书小店，上架数字产品（教程/模板）
- 留聊天钩子，引导私域做咨询
- 接小颗粒广告（通过蒲公英、天下秀等平台）

要求：分阶段规划，包含具体收入预估和可操作性强的动作
`,
    requiredData: ['contentCategory', 'followerCount'],
    format: 'table'
  },
  {
    id: 11,
    title: '冲刺计划总结表',
    promptTemplate: `
制作涨粉冲刺计划总结表。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（🎯📅🔥💪📊等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）

示例格式：

🎯 冲刺计划总结表
- 起号期（第1-2周）：基础搭建+账号定位 | 目标100粉
- 成长期（第3-4周）：内容优化+数据复盘 | 目标300粉
- 加速期（第5-8周）：爆款测试+流量放大 | 目标800粉
- 冲刺期（第9-12周）：规模化运营+变现启动 | 目标1500粉

📅 关键时间节点
- 第3天：发布首篇笔记
- 第7天：完成10篇内容储备
- 第14天：数据复盘，调整方向
- 第30天：测试首个爆款笔记

🔥 每个阶段核心动作
- 起号期：每天发1篇，建立发布习惯
- 成长期：测试3种内容类型，找到最优解
- 加速期：复制爆款模式，提升发布频率
- 冲刺期：启动变现，建立商业模式

要求：明确时间节点、具体核心动作、阶段性目标
`,
    requiredData: ['followerCount'],
    format: 'table'
  },
  {
    id: 12,
    title: '立刻行动清单',
    promptTemplate: `
为"{contentCategory}"类别的小红书账号制作立刻行动清单。

输出格式要求（严格遵守）：
1. 必须使用 emoji 开头（🌙☀️🎯💡🔥等）
2. 不要使用Markdown标题（不要用##或###）
3. 每个内容块必须用列表展开（用 "- " 开头）
4. 最后必须包含设计理念说明

示例格式：

🌙 今晚必做（睡前完成）
- 完善个人简介，突出{contentCategory}定位（5分钟）
- 准备3个选题方向，写下大纲（10分钟）
- 关注10个对标账号，分析他们的爆款笔记（15分钟）
- 下载小红书创作工具App，熟悉功能（10分钟）
- 设置每天发布提醒，固定时间段（5分钟）

☀️ 明天要完成
- 早上：拍摄/准备第一篇笔记素材（30分钟）
- 中午：写完文案，设计封面（45分钟）
- 下午：发布笔记，立即互动30分钟（30分钟）
- 晚上：准备第二天内容（30分钟）

🎯 本周关键里程碑
- 发布3篇笔记，每篇获得100+曝光
- 涨粉20人，建立初始粉丝基础
- 找到1个表现最好的内容方向

💡 为什么要这样设计
- 降低行动门槛：每个任务5-15分钟就能完成，今晚睡前就能开始
- 建立行动惯性：完成第一步最难，但一旦开始就容易继续
- 获得即时反馈：每完成一个任务就能打勾，看到进度前进
- 持续的小行动比完美的大计划更重要，先做起来，边做边优化

要求：每个任务都要具体可执行，标注预计时间，不要用建议性语气
`,
    requiredData: ['contentCategory'],
    format: 'checklist'
  }
]

/**
 * 获取指定章节的模板
 */
export function getSectionTemplate(sectionId: number): SectionTemplate | undefined {
  return SECTION_TEMPLATES.find(t => t.id === sectionId)
}

/**
 * 获取所有模板
 */
export function getAllTemplates(): SectionTemplate[] {
  return SECTION_TEMPLATES
}
