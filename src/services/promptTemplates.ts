import type { SectionTemplate } from '@/types'

/**
 * 统一的格式规范（所有章节必须遵守）
 */
const UNIFIED_FORMAT_RULES = `
【格式铁律 - 违反将导致显示混乱】

1. 卡片标题格式：
   ✅ 正确：emoji + 空格 + 标题文字
   ❌ 错误：不要用 ## 或 ### 或 **加粗**
   
2. 卡片内容格式（三选一）：
   
   方式A - 纯列表：
   💡 卡片标题
   - 列表项1
   - 列表项2
   - 列表项3
   
   方式B - 小标题+列表：
   💡 卡片标题
   尺寸：
   - 3:4竖版
   - 1080px宽度
   
   字体：
   - 思源黑体
   - 加粗处理
   
   方式C - 小标题+数据：
   💡 卡片标题
   第一周：
   - 每天1篇笔记
   - 目标50粉
   
   第二周：
   - 每天2篇笔记
   - 目标150粉

3. 小标题识别规则：
   ✅ 会被识别为小标题：
      - 时间标记：第一周、Day 1、早上、中午
      - 关键词格式：尺寸：、字体：、金额：（冒号后换行）
      - 百分比格式：70%抄什么、30%改什么
      - 分组标题：第一层、基础型、核心组
   
   ❌ 会被识别为普通列表：
      - 普通句子：完善个人资料，设置头像
      - 长文本：超过30字的描述性内容

4. emoji使用规范：
   ✅ 必须使用真实emoji：✅⚠️💡📊📅🎯🔥💰📝🌙☀️📈📉🎨💪
   ❌ 禁止Unicode符号：✓◆▲★●■□

5. 禁止事项：
   ❌ 不要用Markdown标题（## ### ####）
   ❌ 不要用**加粗**（会破坏格式）
   ❌ 不要混用格式（一个卡片内统一风格）
   ❌ 不要嵌套列表（只用一级列表）
`

/**
 * 图像分析提示词 - 增强版，提取更多数据用于个性化
 */
export const IMAGE_ANALYSIS_PROMPT = `
请分析这张小红书主页截图，提取以下信息并以JSON格式返回：

{
  "username": "账号名称",
  "followerCount": 粉丝数（数字）,
  "followingCount": 关注数（数字）,
  "likesCount": 获赞与收藏数（数字）,
  "postCount": 发布笔记数（数字）,
  "contentCategory": "内容类别（如：美妆、穿搭、美食、旅行、知识分享等）",
  "accountLevel": "账号阶段（新手/成长期/成熟期）",
  "bio": "个人简介内容",
  "recentPosts": [
    {
      "title": "笔记标题",
      "likes": 点赞数,
      "comments": 评论数,
      "isVideo": 是否为视频（true/false）
    }
  ],
  "contentStyle": "内容风格特点（如：干货型、种草型、教程型、日常分享型）",
  "updateFrequency": "更新频率估算（如：日更、隔日更、周更）",
  "analysisDate": "当前日期"
}

重要提示：
1. 小红书主页的数字顺序是：【关注数】【粉丝数】【获赞与收藏】
2. followerCount 是第二个数字（粉丝数），不是第一个数字（关注数）
3. 例如：如果看到 "0 关注 5 粉丝"，那么 followerCount 应该是 5，不是 0
4. 根据粉丝数判断账号阶段：0-500新手，500-5000成长期，5000+成熟期
5. 分析最近笔记的标题风格，判断内容风格特点
6. 如果无法识别某些信息，请用合理的默认值
7. 只返回JSON，不要有其他文字
`

/**
 * 计算派生数据的辅助函数描述（在后端使用）
 */
export const DERIVED_DATA_DESCRIPTION = `
基于原始数据计算的派生指标：
- avgLikes: 平均点赞数 = 总获赞 / 笔记数
- engagementRate: 互动率 = (平均点赞 + 平均评论) / 粉丝数 * 100%
- postsPerFollower: 内容密度 = 笔记数 / 粉丝数
- growthPotential: 增长潜力评估（基于互动率和内容密度）
`

/**
 * 重新设计的12个章节 - 优化逻辑顺序
 * 
 * 新顺序逻辑：
 * 第一阶段：认知（了解现状和方向）
 *   1. 账号诊断报告 - 知道现状
 *   2. 定位与人设建议 - 明确方向
 *   3. 目标用户画像 - 知道为谁服务
 * 
 * 第二阶段：学习（学习方法和标杆）
 *   4. 对标账号拆解 - 学习标杆
 *   5. 爆款内容公式 - 掌握方法
 * 
 * 第三阶段：规划（制定计划）
 *   6. 内容矩阵规划 - 规划内容体系
 *   7. 30天冲刺计划 - 阶段性目标
 * 
 * 第四阶段：执行（开始行动）
 *   8. 起号实操指南 - 具体操作步骤
 *   9. 流量获取技巧 - 获取曝光
 *   10. 日常运营SOP - 标准化流程
 * 
 * 第五阶段：优化（持续改进）
 *   11. 数据分析与优化 - 复盘改进
 *   12. 变现路径规划 - 商业变现
 */
export const SECTION_TEMPLATES: SectionTemplate[] = [
  // ========== 第一阶段：认知 ==========
  {
    id: 1,
    title: '账号诊断报告',
    promptTemplate: `
你是一位专业的小红书运营顾问，请为这个账号出具一份诊断报告。

📊 账号基础数据：
- 账号名：{username}
- 粉丝数：{followerCount}
- 笔记数：{postCount}
- 获赞收藏：{likesCount}
- 内容类别：{contentCategory}
- 内容风格：{contentStyle}
- 更新频率：{updateFrequency}

📈 计算指标：
- 平均互动：约 {avgLikes} 赞/篇
- 内容密度：{postsPerFollower}

${UNIFIED_FORMAT_RULES}

请输出以下内容：

🔍 账号健康度评分
- 内容质量：X/10分（基于平均互动数据）
- 更新频率：X/10分（基于发布规律）
- 粉丝粘性：X/10分（基于互动率）
- 定位清晰度：X/10分（基于内容垂直度）
- 综合评分：X/10分

✅ 核心优势（2-3条）
- 优势1：具体描述，为什么这是优势
- 优势2：具体描述，数据支撑

⚠️ 关键问题（2-3条）
- 问题1：具体问题，造成的影响
- 问题2：具体问题，需要如何改进

📊 同类账号对比
- 你的账号 vs 同粉丝量级平均水平
- 差距在哪里，优势在哪里

🎯 涨粉预测
- 当前阶段：{accountLevel}
- 涨到1000粉预计时间：X周
- 关键突破点：需要做什么才能加速

要求：
- 数据要具体，不要泛泛而谈
- 语气专业但不生硬，像资深顾问在分析
- 每个结论都要有数据或逻辑支撑
`,
    requiredData: ['username', 'followerCount', 'postCount', 'likesCount', 'contentCategory', 'contentStyle', 'updateFrequency', 'avgLikes', 'postsPerFollower', 'accountLevel'],
    format: 'text'
  },
  {
    id: 2,
    title: '定位与人设建议',
    promptTemplate: `
基于账号诊断，为"{username}"提供定位和人设建议。

📊 当前状态：
- 内容类别：{contentCategory}
- 内容风格：{contentStyle}
- 粉丝数：{followerCount}
- 个人简介：{bio}

${UNIFIED_FORMAT_RULES}

请输出以下内容：

🎯 账号定位建议
- 核心定位：一句话说清楚你是谁、做什么、给谁看
- 差异化点：在{contentCategory}领域，你的独特价值是什么
- 内容边界：做什么、不做什么，保持垂直度

👤 人设塑造方案
- 人设关键词：3-5个描述你形象的词
- 说话风格：语气、用词、表达习惯
- 视觉风格：配色、封面风格、整体调性

📝 个人简介优化
- 当前简介问题分析
- 优化后的简介模板（直接可用）
- 简介要包含：身份标签 + 能提供的价值 + 关注理由

🏷️ 账号标签体系
- 主标签：{contentCategory}相关的核心标签3-5个
- 副标签：扩展流量的相关标签3-5个
- 禁用标签：不要用的标签（太泛或不相关）

💡 定位自检清单
- 用户能在3秒内知道你是做什么的吗？
- 你的内容有没有一个统一的"感觉"？
- 粉丝关注你的理由是什么？

要求：
- 定位要具体可执行，不要太宽泛
- 人设要有记忆点，能让用户记住
- 所有建议都要结合{contentCategory}领域特点
`,
    requiredData: ['username', 'contentCategory', 'contentStyle', 'followerCount', 'bio'],
    format: 'mixed'
  },
  {
    id: 3,
    title: '目标用户画像',
    promptTemplate: `
为"{contentCategory}"类型账号绘制目标用户画像。

📊 账号信息：
- 账号名：{username}
- 内容类别：{contentCategory}
- 内容风格：{contentStyle}
- 当前粉丝：{followerCount}

${UNIFIED_FORMAT_RULES}

请输出以下内容：

👥 核心用户画像
- 年龄区间：XX-XX岁（为什么是这个年龄段）
- 性别比例：女性X% / 男性X%
- 地域分布：一二线城市为主 / 下沉市场为主
- 职业特征：学生/白领/宝妈/自由职业等
- 收入水平：月收入区间

🎭 用户心理特征
- 核心痛点：他们最想解决什么问题？（3条）
- 潜在需求：他们可能还需要什么？（3条）
- 消费动机：为什么会为{contentCategory}内容付费？

📱 用户行为习惯
- 活跃时间：什么时候刷小红书最多
- 内容偏好：喜欢什么类型的内容形式
- 互动习惯：什么情况下会点赞/收藏/评论

🔥 用户痒点清单
- 痒点1：让他们忍不住点进来的点
- 痒点2：让他们愿意收藏的点
- 痒点3：让他们想要关注的点

💬 用户常用搜索词
- 搜索关键词1：用户会搜什么找到你
- 搜索关键词2：竞品账号的流量词
- 搜索关键词3：长尾需求词

📝 内容方向建议
- 基于用户画像，你应该多做什么内容
- 基于用户画像，你应该少做什么内容
- 基于用户画像，你的选题方向

要求：
- 画像要具体，能指导内容创作
- 每个结论都要有逻辑支撑
- 结合{contentCategory}领域的真实用户特点
`,
    requiredData: ['username', 'contentCategory', 'contentStyle', 'followerCount'],
    format: 'mixed'
  },

  // ========== 第二阶段：学习 ==========
  {
    id: 4,
    title: '对标账号拆解',
    promptTemplate: `
为"{contentCategory}"领域账号提供对标账号分析方法和拆解框架。

📊 你的账号状态：
- 粉丝数：{followerCount}
- 内容类别：{contentCategory}

${UNIFIED_FORMAT_RULES}

请输出以下内容：

🔍 如何找到对标账号
- 搜索关键词：用什么词搜索同类账号
- 筛选标准：粉丝量是你的5-20倍，互动率>5%
- 推荐数量：找3-5个对标账号足够

📊 18维度拆解清单

内容层（6维度）：
- 选题方向：他做哪些选题最火
- 标题公式：他的标题有什么规律
- 内容结构：开头-中间-结尾怎么安排
- 价值密度：每篇内容能学到几个点
- 更新频率：多久发一篇，什么时间发
- 内容形式：图文/视频/合集的比例

视觉层（6维度）：
- 封面风格：配色、字体、排版
- 图片质量：清晰度、构图、调色
- 首图吸引力：第一张图的特点
- 整体调性：账号的视觉统一感
- 头像设计：头像风格和特点
- 主页美观度：整体主页的感觉

运营层（6维度）：
- 个人简介：怎么写的，有什么钩子
- 评论互动：怎么回复粉丝
- 置顶笔记：置顶了什么内容
- 合集分类：有没有做内容合集
- 引流方式：怎么引导关注/私信
- 变现模式：怎么赚钱的

🎯 重点模仿的5个细节
- 细节1：具体要模仿什么，为什么
- 细节2：具体要模仿什么，为什么
- 细节3：具体要模仿什么，为什么
- 细节4：具体要模仿什么，为什么
- 细节5：具体要模仿什么，为什么

⚠️ 不要抄袭的红线
- 不要直接搬运文案
- 不要完全复制封面设计
- 不要抄袭独特的表达方式

要求：
- 每个维度都要具体，可直接对照检查
- 重点模仿的细节要可执行
`,
    requiredData: ['contentCategory', 'followerCount'],
    format: 'mixed'
  },
  {
    id: 5,
    title: '爆款内容公式',
    promptTemplate: `
为"{contentCategory}"类别提供经过验证的爆款内容公式。

${UNIFIED_FORMAT_RULES}

请输出以下内容：

📝 爆款标题公式（8种类型）

数字型：
- 公式：数字 + 结果 + 时间限定
- 示例：3招让你的{contentCategory}效率翻倍｜新手必看

疑问型：
- 公式：为什么 + 痛点现象 + 暗示解决方案
- 示例：为什么你的{contentCategory}总是不见效？

对比型：
- 公式：A vs B + 差距展示
- 示例：月薪3k和月薪3w的人，{contentCategory}差在哪？

情绪型：
- 公式：强烈情绪词 + 具体效果
- 示例：救命！这个方法太绝了，早知道就好了

悬念型：
- 公式：悬念钩子 + 利益承诺
- 示例：这个秘密我藏了3年，今天全部告诉你

清单型：
- 公式：N个 + 主题 + 场景限定
- 示例：8个{contentCategory}神器｜用过都说好

避坑型：
- 公式：千万别 + 常见错误 + 后果
- 示例：千万别这样做{contentCategory}，我踩过的坑

教程型：
- 公式：手把手 + 具体效果 + 难度说明
- 示例：手把手教你{contentCategory}｜小白也能学会

🎨 封面设计公式

黄金布局：
- 上半部分：吸引眼球的图片/效果展示
- 下半部分：大字标题+副标题
- 比例建议：图片60% + 文字40%

配色方案：
- 主色调：1个主色（占70%）
- 强调色：1个对比色（占20%）
- 辅助色：黑/白/灰（占10%）
- 推荐配色：{contentCategory}领域常用色系

字体规范：
- 标题字号：32-48px，加粗
- 副标题：18-24px，常规
- 字体推荐：思源黑体、站酷系列

📄 正文结构模板

开头（抓注意力）：
- 痛点共鸣："你是不是也遇到过..."
- 效果展示："用这个方法后，我..."
- 悬念引入："接下来要说的，可能颠覆你的认知"

中间（给价值）：
- 分点呈现：3-5个核心要点
- 每点配图：截图/示例/对比图
- 金句点缀：每200字一个记忆点

结尾（促互动）：
- 总结价值："学会这X点，你也能..."
- 互动引导："你觉得哪个最有用？评论区告诉我"
- 关注钩子："关注我，下期教你..."

💡 爆款要素检查清单
- 标题有没有数字或情绪词？
- 封面3秒内能看懂主题吗？
- 开头5秒能抓住注意力吗？
- 内容有没有明确的价值点？
- 结尾有没有互动引导？

要求：
- 每个公式都要有具体示例
- 示例要结合{contentCategory}领域
- 可直接套用，改几个词就能用
`,
    requiredData: ['contentCategory'],
    format: 'mixed'
  },

  // ========== 第三阶段：规划 ==========
  {
    id: 6,
    title: '内容矩阵规划',
    promptTemplate: `
为"{username}"（{contentCategory}类别）制定内容矩阵规划。

📊 账号状态：
- 当前粉丝：{followerCount}
- 内容风格：{contentStyle}
- 目标粉丝：1000

${UNIFIED_FORMAT_RULES}

请输出以下内容：

📊 内容类型配比

流量型内容（40%）：
- 目的：获取曝光和新粉丝
- 特点：蹭热点、大众话题、情绪共鸣
- 选题示例：3个具体选题

价值型内容（40%）：
- 目的：建立专业形象，让粉丝收藏
- 特点：干货教程、深度分析、实用技巧
- 选题示例：3个具体选题

互动型内容（20%）：
- 目的：增加粉丝粘性和互动
- 特点：提问、投票、话题讨论
- 选题示例：3个具体选题

📅 选题日历模板

周一：流量型 - 周末热点回顾/周一励志
周二：价值型 - 干货教程类
周三：互动型 - 话题讨论/投票
周四：价值型 - 深度分析类
周五：流量型 - 周末种草/推荐
周六：价值型 - 合集/清单类
周日：互动型 - 本周总结/下周预告

🎯 本月选题库（20个选题）

第一周（基础款）：
- 选题1：标题 | 类型 | 预期效果
- 选题2：标题 | 类型 | 预期效果
- 选题3：标题 | 类型 | 预期效果
- 选题4：标题 | 类型 | 预期效果
- 选题5：标题 | 类型 | 预期效果

第二周（进阶款）：
- 选题6-10...

第三周（爆款测试）：
- 选题11-15...

第四周（优化迭代）：
- 选题16-20...

⏰ 发布时间策略
- 工作日最佳：7:00-8:00 | 12:00-13:00 | 19:00-21:00
- 周末最佳：9:00-11:00 | 15:00-17:00 | 20:00-22:00
- 你的最佳发布时间：根据{contentCategory}用户习惯推荐

📈 内容升级路径
- 0-100粉：单点突破，找到1个有效选题反复做
- 100-500粉：横向扩展，测试3种内容类型
- 500-1000粉：形成矩阵，建立内容体系

要求：
- 选题要具体，直接可用
- 每个选题都要说明为什么选这个
- 结合{contentCategory}领域特点
`,
    requiredData: ['username', 'contentCategory', 'contentStyle', 'followerCount'],
    format: 'table'
  },
  {
    id: 7,
    title: '30天冲刺计划',
    promptTemplate: `
为"{username}"制定30天涨粉冲刺计划（目标：从{followerCount}涨到1000粉）。

${UNIFIED_FORMAT_RULES}

请输出以下内容：

🎯 30天总目标
- 粉丝目标：从{followerCount} → 1000
- 内容目标：发布X篇笔记
- 数据目标：平均互动率>X%

📅 分周计划

第一周｜基础搭建期：
- 核心任务：完善账号基建，发布首批内容
- 粉丝目标：+100
- 内容数量：5篇
- 每日动作：
  - Day 1-2：账号优化+内容准备
  - Day 3-5：发布+互动+数据观察
  - Day 6-7：复盘调整+下周准备

第二周｜内容测试期：
- 核心任务：测试不同内容类型，找到有效方向
- 粉丝目标：+150（累计250）
- 内容数量：6篇
- 重点：测试3种不同类型内容，找到数据最好的

第三周｜放量加速期：
- 核心任务：复制有效模式，提升发布频率
- 粉丝目标：+300（累计550）
- 内容数量：8篇
- 重点：把第二周效果最好的内容类型多做几篇

第四周｜冲刺收官期：
- 核心任务：全力冲刺，争取爆款
- 粉丝目标：+450（累计1000）
- 内容数量：10篇
- 重点：配合薯条投放，放大优质内容

📊 关键里程碑
- Day 3：发布第一篇笔记
- Day 7：完成首周5篇，复盘数据
- Day 14：找到表现最好的内容方向
- Day 21：出现第一篇小爆款（点赞>100）
- Day 30：粉丝突破1000

🔥 每周必做清单
- 发布X篇笔记（雷打不动）
- 每天互动30分钟（评论+点赞）
- 周末做一次数据复盘
- 准备下周内容素材

⚡ 加速技巧
- 薯条投放：表现好的笔记投5-10元测试
- 互推合作：找同量级账号互推
- 热点借势：结合当周热点创作

⚠️ 风险预警
- 如果第一周涨粉<50：检查内容方向是否正确
- 如果第二周没有找到有效方向：扩大测试范围
- 如果连续3篇数据很差：暂停发布，重新分析

要求：
- 计划要具体可执行
- 每个阶段都要有明确的检查标准
- 留有调整空间
`,
    requiredData: ['username', 'followerCount'],
    format: 'table'
  },

  // ========== 第四阶段：执行 ==========
  {
    id: 8,
    title: '起号实操指南',
    promptTemplate: `
为"{username}"（{contentCategory}类别）提供起号前3天的详细操作指南。

${UNIFIED_FORMAT_RULES}

请输出以下内容：

📅 Day 1 - 账号基建日

上午（1小时）：
- 优化头像：真人/IP形象/品牌logo
- 修改昵称：{contentCategory}相关+记忆点
- 完善简介：身份+价值+关注理由
- 设置背景图：展示定位或作品

下午（2小时）：
- 关注30个对标账号
- 点赞收藏100篇同类内容
- 评论20条高质量评论（养号+学习）
- 保存10个爆款选题

晚上（1小时）：
- 确定第一篇笔记选题
- 准备素材和大纲
- 设置明天发布提醒

📅 Day 2 - 内容准备日

上午（2小时）：
- 写完第一篇笔记文案
- 设计封面图
- 准备配图（3-9张）
- 自检清单核对

下午（1小时）：
- 准备第二篇笔记素材
- 写好大纲
- 找好参考

晚上（30分钟）：
- 最后检查第一篇内容
- 选好发布时间
- 准备发布后的互动计划

📅 Day 3 - 首发起飞日

发布前（30分钟）：
- 选择最佳发布时间
- 最后检查一遍内容
- 准备好评论区第一条

发布时：
- 添加话题标签（3-5个）
- 添加定位（如适合）
- 点击发布

发布后0-1小时（黄金期）：
- 0-5分钟：评论区发第一条评论
- 5-15分钟：回复所有评论
- 15-30分钟：去对标账号互动
- 30-60分钟：观察数据，决定是否投薯条

发布后1-24小时：
- 每2小时检查一次数据
- 持续回复新评论
- 准备第二篇内容

🎯 首篇内容自检清单
- 标题有吸引力吗？（有数字/情绪词/痛点）
- 封面3秒能看懂吗？
- 内容有明确价值吗？
- 结尾有互动引导吗？
- 话题标签选对了吗？

💡 首篇选题建议
- 选题1：新手入门类（门槛低，受众广）
- 选题2：避坑指南类（痛点明确，容易共鸣）
- 选题3：干货合集类（价值感强，容易收藏）

⚠️ 首篇常见错误
- 太追求完美，迟迟不发
- 内容太长，没有重点
- 没有互动引导
- 发布后不互动

要求：
- 每个步骤都要具体到时间
- 可以直接对照执行
- 结合{contentCategory}领域特点
`,
    requiredData: ['username', 'contentCategory'],
    format: 'checklist'
  },
  {
    id: 9,
    title: '流量获取技巧',
    promptTemplate: `
提供小红书流量获取的实操技巧。

${UNIFIED_FORMAT_RULES}

请输出以下内容：

🔥 自然流量获取

发布时间优化：
- 工作日最佳：7:00-8:00（通勤）| 12:00-13:00（午休）| 19:00-21:00（晚高峰）
- 周末最佳：9:00-11:00 | 15:00-17:00 | 20:00-22:00
- 避开时间：凌晨0:00-6:00（流量低谷）

话题标签策略：
- 大话题（1-2个）：搜索量大，竞争激烈
- 中话题（2-3个）：垂直精准，转化率高
- 小话题（1-2个）：竞争小，容易上热门

搜索流量优化：
- 标题包含用户搜索词
- 正文前100字包含关键词
- 话题标签与搜索词匹配

💰 付费流量（薯条投放）

投放时机判断：
- 发布1小时内曝光<200：先别投，检查内容
- 发布1小时内曝光>500：可以投，有潜力
- 互动率>8%：值得投，有爆款潜质

投放金额建议：
- 测试期：5元/篇，测试反馈
- 加热期：10-20元/篇，加速流量
- 爆款期：50-100元/篇，放大效果

投放目标选择：
- 新账号选"点赞收藏"：积累初始数据
- 有基础选"粉丝关注"：提升转化
- 爆款选"笔记曝光"：最大化流量

📣 互动流量获取

评论区运营：
- 自己发第一条：留钩子/补充信息/提问
- 秒回评论：新评论5分钟内回复
- 引导讨论：回复时抛出新问题

主动出击：
- 每天去10个同类账号评论
- 评论要有价值，不要纯夸赞
- 目标：让别人点进你主页

🤝 合作流量获取

互推合作：
- 找同量级账号（粉丝数相近）
- 找互补账号（用户重叠但内容不同）
- 合作方式：互相@/合集/话题联动

社群引流：
- 加入同领域交流群
- 分享有价值的内容（不要硬广）
- 建立个人专业形象

📊 流量效果评估
- 曝光量：单篇>1000算及格
- 互动率：>5%算及格，>10%是优秀
- 涨粉率：>3%算及格，>5%是优秀
- 收藏率：>点赞数的30%说明内容有价值

要求：
- 技巧要具体可执行
- 包含具体的数据标准
- 有新手也有进阶技巧
`,
    requiredData: [],
    format: 'mixed'
  },
  {
    id: 10,
    title: '日常运营SOP',
    promptTemplate: `
制定小红书日常运营标准操作流程（SOP）。

${UNIFIED_FORMAT_RULES}

请输出以下内容：

📋 每日SOP流程

🌅 早间（7:00-9:00）30分钟
- 检查昨晚数据（5分钟）
  - 查看新增粉丝、点赞、评论
  - 记录表现最好的内容
- 回复过夜评论和私信（10分钟）
  - 所有评论必回
  - 私信筛选后回复
- 刷同领域内容（15分钟）
  - 收集选题灵感
  - 了解最新热点

🌞 午间（12:00-13:00）30分钟
- 发布当日内容（如有）
- 发布后立即互动15分钟
- 检查上午数据变化

🌙 晚间（19:00-22:00）1小时
- 发布内容（最佳时间段）
- 发布后互动30分钟
- 准备明天的内容素材（20分钟）
- 今日数据总结（10分钟）

📋 每周SOP流程

周一：本周内容排期确认
周二-周五：按计划发布+互动
周六：本周数据复盘
周日：下周内容准备

📋 每月SOP流程

月初：制定本月目标和内容计划
月中：检查进度，调整策略
月末：月度复盘，总结经验

📊 数据记录模板

每日记录：
- 日期：
- 发布内容：标题
- 曝光量：
- 点赞数：
- 收藏数：
- 评论数：
- 新增粉丝：
- 备注：

每周汇总：
- 发布数量：X篇
- 总曝光：X
- 总互动：X
- 涨粉数：X
- 最佳内容：标题
- 最差内容：标题
- 本周心得：

🛠️ 常用工具清单
- 数据分析：小红书创作中心
- 图片编辑：美图秀秀/Canva/醒图
- 文案辅助：ChatGPT/文心一言
- 选题灵感：5118/新红数据

✅ 日常检查清单
- 今天发内容了吗？
- 评论都回复了吗？
- 主动互动了吗？
- 明天内容准备了吗？
- 数据记录了吗？

要求：
- 流程要标准化，可重复执行
- 时间安排要合理，适合兼职运营
- 每个步骤都要具体
`,
    requiredData: [],
    format: 'checklist'
  },

  // ========== 第五阶段：优化 ==========
  {
    id: 11,
    title: '数据分析与优化',
    promptTemplate: `
提供数据分析方法和优化策略。

${UNIFIED_FORMAT_RULES}

请输出以下内容：

📊 核心数据指标详解

曝光量：
- 定义：笔记被展示的次数
- 健康标准：新号>200/篇，成熟号>1000/篇
- 影响因素：标题、封面、发布时间、账号权重
- 优化方向：优化标题和封面吸引力

互动率：
- 计算公式：（点赞+收藏+评论）/ 曝光量 × 100%
- 健康标准：>5%及格，>10%优秀，>15%爆款潜质
- 影响因素：内容价值、互动引导、用户匹配度
- 优化方向：提升内容价值感，加强互动引导

收藏率：
- 计算公式：收藏数 / 曝光量 × 100%
- 健康标准：>1%及格，>3%优秀
- 说明：收藏率高说明内容有长期价值
- 优化方向：增加实用性内容，便于用户回看

涨粉率：
- 计算公式：新增粉丝 / 曝光量 × 100%
- 健康标准：>0.5%及格，>2%优秀
- 说明：涨粉率高说明账号吸引力强
- 优化方向：强化账号定位，增加关注理由

📈 数据诊断流程

问题1：曝光低
- 可能原因：标题不吸引、封面不好看、话题没选对
- 诊断方法：对比爆款内容的标题和封面
- 优化动作：A/B测试不同标题和封面

问题2：曝光高但互动低
- 可能原因：标题党、内容没价值、没有互动引导
- 诊断方法：检查内容价值密度
- 优化动作：提升内容质量，增加互动引导

问题3：互动高但涨粉低
- 可能原因：没有关注理由、简介不清晰、内容不垂直
- 诊断方法：检查主页吸引力
- 优化动作：优化简介，强化账号定位

问题4：数据忽高忽低
- 可能原因：内容质量不稳定、发布时间不固定
- 诊断方法：分析历史数据规律
- 优化动作：建立内容标准，固定发布时间

📋 周度复盘模板

数据汇总：
- 本周发布：X篇
- 总曝光：X
- 总互动：X
- 涨粉数：X

Top3内容分析：
- 第一名：标题 | 曝光X | 互动X | 成功原因
- 第二名：标题 | 曝光X | 互动X | 成功原因
- 第三名：标题 | 曝光X | 互动X | 成功原因

Bottom3内容分析：
- 倒数第一：标题 | 曝光X | 互动X | 失败原因
- 倒数第二：标题 | 曝光X | 互动X | 失败原因
- 倒数第三：标题 | 曝光X | 互动X | 失败原因

下周优化方向：
- 多做什么类型内容
- 少做什么类型内容
- 具体优化动作

🎯 优化优先级
- 首先优化：标题和封面（影响曝光）
- 其次优化：内容结构（影响互动）
- 最后优化：账号基建（影响涨粉）

要求：
- 方法要具体可执行
- 包含具体的数据标准
- 有诊断思路和解决方案
`,
    requiredData: [],
    format: 'table'
  },
  {
    id: 12,
    title: '变现路径规划',
    promptTemplate: `
为"{contentCategory}"类别账号规划变现路径。

📊 当前状态：
- 粉丝数：{followerCount}
- 内容类别：{contentCategory}

${UNIFIED_FORMAT_RULES}

请输出以下内容：

💰 变现阶段规划

阶段一（0-500粉）- 积累期：
- 主要收入：0-500元/月
- 变现方式：
  - 互推导流：加入社群，互相引流
  - 小额广告：通过任务平台接简单任务
  - 知识沉淀：整理内容，为后续付费产品做准备
- 核心任务：专注涨粉，不要急着变现

阶段二（500-2000粉）- 起步期：
- 主要收入：500-3000元/月
- 变现方式：
  - 广告合作：开通蒲公英，接品牌广告
  - 好物推荐：开通小红书店铺，做带货
  - 付费咨询：提供1对1咨询服务
- 核心任务：测试变现模式，找到最适合的

阶段三（2000-5000粉）- 成长期：
- 主要收入：3000-10000元/月
- 变现方式：
  - 稳定接广告：建立品牌合作关系
  - 知识付费：推出付费课程/资料包
  - 私域转化：引导到微信做深度服务
- 核心任务：建立稳定的收入来源

阶段四（5000粉+）- 成熟期：
- 主要收入：10000元+/月
- 变现方式：
  - 品牌代言：长期合作关系
  - 直播带货：开通直播功能
  - IP商业化：课程/社群/代运营
- 核心任务：多元化收入，建立商业壁垒

🎯 当前可立即行动（{followerCount}粉丝）

立即可做：
- 加入{contentCategory}领域社群，积累人脉
- 整理已有内容，做成资料合集
- 开通创作者中心，了解平台政策
- 建立作品集，准备接广告

准备中：
- 了解蒲公英平台规则
- 调研同行变现案例
- 设计第一个付费产品

📊 变现能力评估

广告报价参考（{contentCategory}领域）：
- 500粉：100-300元/篇
- 2000粉：500-1000元/篇
- 5000粉：1000-3000元/篇
- 10000粉：3000-8000元/篇

影响报价因素：
- 粉丝质量（活跃度、购买力）
- 内容垂直度（越垂直越值钱）
- 互动数据（互动率高报价高）
- 账号调性（是否匹配品牌）

⚠️ 变现避坑指南
- 不要太早接广告，会伤害粉丝信任
- 不要接与定位不符的广告
- 不要虚假宣传，有法律风险
- 不要把所有鸡蛋放一个篮子里

💡 长期变现建议
- 建立个人IP，不要只靠平台
- 积累可复用的资产（课程/模板/方法论）
- 保持内容质量，这是变现的基础
- 多元化收入来源，降低风险

要求：
- 每个阶段都要有具体收入预估
- 变现方式要具体可操作
- 结合{contentCategory}领域特点
`,
    requiredData: ['contentCategory', 'followerCount'],
    format: 'table'
  }
]

/**
 * 获取指定章节的模板
 */
export function getSectionTemplate(sectionId: number): SectionTemplate | undefined {
  return SECTION_TEMPLATES.find(t => t.id === sectionId)
}

/**
 * 获取所有模板
 */
export function getAllTemplates(): SectionTemplate[] {
  return SECTION_TEMPLATES
}

/**
 * 章节分组信息（用于UI展示）
 */
export const SECTION_GROUPS = [
  {
    name: '第一阶段：认知',
    description: '了解现状，明确方向',
    sections: [1, 2, 3]
  },
  {
    name: '第二阶段：学习',
    description: '学习标杆，掌握方法',
    sections: [4, 5]
  },
  {
    name: '第三阶段：规划',
    description: '制定计划，明确目标',
    sections: [6, 7]
  },
  {
    name: '第四阶段：执行',
    description: '开始行动，获取流量',
    sections: [8, 9, 10]
  },
  {
    name: '第五阶段：优化',
    description: '数据分析，持续改进',
    sections: [11, 12]
  }
]
