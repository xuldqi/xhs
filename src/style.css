/* 导入设计系统 */
@import './styles/design-tokens.css';
@import './styles/components.css';
@import './styles/responsive.css';

:root {
  font-family: var(--font-sans-zh), var(--font-sans);
  line-height: var(--leading-normal);
  font-weight: var(--font-normal);

  color-scheme: light;
  color: var(--text-primary);
  background-color: var(--bg-primary);

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* 移动端优化 */
  -webkit-tap-highlight-color: transparent;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

*:focus-visible {
  outline: 2px solid var(--brand-primary);
  outline-offset: 2px;
}

html {
  /* 防止 iOS 自动缩放 */
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  background-color: var(--bg-primary);
  color: var(--text-primary);
  font-size: var(--font-base);  /* 16px - 正文最小字号 */
  line-height: var(--leading-relaxed);  /* 1.6 - 正文最小行高 */
  overflow-x: hidden;
}

#app {
  width: 100%;
  margin: 0 auto;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* 移动端优化 - 触摸友好 */
button,
a,
input,
textarea,
select {
  -webkit-tap-highlight-color: transparent;
}

button,
a {
  cursor: pointer;
  user-select: none;
}

/* 移动端优化 - 滚动性能 */
.scroll-container {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* 移动端优化 - 图片加载 */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* 移动端优化 - 文本选择 */
.no-select {
  user-select: none;
  -webkit-user-select: none;
}

/* 移动端优化 - 安全区域（刘海屏） */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
  }
}

/* 标题样式 - 确保字体一致性和字重 >= 600 */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-sans-zh), var(--font-sans);
  font-weight: var(--font-semibold);  /* 600 - 标题最小字重 */
  line-height: var(--leading-tight);
  color: var(--text-primary);
  margin: 0;
}

h1 {
  font-size: var(--font-5xl);  /* 48px 桌面端 */
  font-weight: var(--font-bold);  /* 700 */
}

h2 {
  font-size: var(--font-4xl);  /* 36px */
  font-weight: var(--font-bold);
}

h3 {
  font-size: var(--font-2xl);  /* 24px - 标题最小字号 */
}

h4 {
  font-size: var(--font-lg);  /* 18px - 副标题最小字号 */
}

h5 {
  font-size: var(--font-base);  /* 16px */
}

h6 {
  font-size: var(--font-sm);  /* 14px */
}

/* 段落样式 - 确保行高 >= 1.6 和间距 >= 16px */
p {
  font-size: var(--font-base);  /* 16px - 正文最小字号 */
  line-height: var(--leading-relaxed);  /* 1.6 - 正文最小行高 */
  margin: 0 0 var(--spacing-4) 0;  /* 16px - 段落最小间距 */
  max-width: 65ch;  /* 限制行长度 50-75 字符 */
}

/* 响应式字体大小 */
@media (max-width: 768px) {
  html {
    /* 移动端至少 16px，防止 iOS 自动缩放 */
    font-size: var(--mobile-font-base);
  }
  
  body {
    font-size: var(--mobile-font-base);  /* 16px */
    line-height: var(--leading-relaxed);  /* 1.6 */
  }
  
  /* 移动端标题调整 */
  h1 {
    font-size: var(--mobile-title-size);  /* 32px - 首屏标题移动端 */
  }
  
  h2 {
    font-size: var(--font-2xl);  /* 24px */
  }
  
  h3 {
    font-size: var(--font-xl);  /* 20px */
  }
  
  h4 {
    font-size: var(--font-base);  /* 16px */
  }
}

/* 平板优化 */
@media (min-width: 769px) and (max-width: 1023px) {
  html {
    font-size: 16px;
  }
}

/* 桌面优化 */
@media (min-width: 1024px) {
  html {
    font-size: 16px;
  }
}
