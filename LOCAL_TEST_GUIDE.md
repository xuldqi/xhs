# 🧪 本地测试指南

在部署到生产环境之前,先在本地进行全面测试。

## 📋 测试前准备

### 1. 确保环境配置正确

检查 `.env` 文件是否存在并配置了必要的环境变量:

```bash
cd xiaohongshu-guide-generator

# 检查 .env 文件
cat .env
```

必需的环境变量:
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
VITE_GA_MEASUREMENT_ID=your_ga_id (可选)
```

### 2. 安装依赖

```bash
# 安装前端依赖
npm install

# 如果有后端,也安装后端依赖
cd backend
npm install
cd ..
```

## 🚀 启动本地开发服务器

### 方式一: 使用 npm 脚本

```bash
# 启动前端开发服务器
npm run dev
```

服务器会在 `http://localhost:5173` 启动

### 方式二: 使用 dev.sh 脚本

```bash
chmod +x dev.sh
./dev.sh
```

## ✅ 本地测试清单

### 1. 基础功能测试

打开浏览器访问 `http://localhost:5173`

#### 首页测试
- [ ] 页面正常加载,无白屏
- [ ] 导航栏显示正常
- [ ] Logo 和品牌元素显示
- [ ] 首页内容完整显示
- [ ] CTA 按钮可点击
- [ ] 页脚显示正常

#### 导航测试
- [ ] 点击"知识库"进入知识库页面
- [ ] 点击"案例库"进入案例库页面
- [ ] 点击"情报局"进入情报局页面
- [ ] 点击"资源库"进入资源库页面
- [ ] 点击"工具"进入工具页面
- [ ] 点击"社区"进入社区页面
- [ ] 所有导航链接都能正常工作

### 2. 知识库功能测试

访问 `http://localhost:5173/knowledge`

- [ ] 文章列表正常显示
- [ ] 文章卡片包含标题、摘要、日期
- [ ] 点击文章可以查看详情
- [ ] 文章详情页内容完整
- [ ] 分类筛选功能正常
- [ ] 搜索功能正常(如果有)
- [ ] 相关文章推荐显示

### 3. 案例库功能测试

访问 `http://localhost:5173/cases`

- [ ] 案例列表正常显示
- [ ] 案例卡片显示完整信息
- [ ] 点击案例可以查看详情
- [ ] 增长曲线图正常显示
- [ ] 筛选功能正常工作
- [ ] 时间线展示正常

### 4. 情报局功能测试

访问 `http://localhost:5173/intelligence`

- [ ] 情报列表正常显示
- [ ] 情报卡片显示日期和标签
- [ ] 点击情报可以查看详情
- [ ] 分类筛选正常
- [ ] "新"标签显示正确

### 5. 资源库功能测试

访问 `http://localhost:5173/resources`

- [ ] 资源列表正常显示
- [ ] 模板卡片显示完整
- [ ] 预览功能正常
- [ ] 下载按钮可点击
- [ ] 分类和搜索正常

### 6. 工具功能测试

访问 `http://localhost:5173/tools`

- [ ] 工具列表正常显示
- [ ] 标题生成器可以使用
- [ ] 话题分析工具正常
- [ ] 竞品分析工具正常
- [ ] 工具使用说明清晰
- [ ] 工具结果正确显示

### 7. 社区功能测试

访问 `http://localhost:5173/community`

- [ ] 问答列表正常显示
- [ ] 可以发布问题
- [ ] 可以回答问题
- [ ] 点赞功能正常
- [ ] 评论功能正常

### 8. 移动端测试

打开浏览器开发者工具 (F12),切换到移动设备模式

#### 测试不同屏幕尺寸
- [ ] iPhone SE (375px)
- [ ] iPhone 12 Pro (390px)
- [ ] iPad (768px)
- [ ] iPad Pro (1024px)

#### 移动端功能
- [ ] 汉堡菜单正常显示和工作
- [ ] 页面布局适配移动端
- [ ] 按钮大小适合触摸
- [ ] 文字大小合适(至少16px)
- [ ] 图片正常加载
- [ ] 滚动流畅

### 9. 性能测试

#### 使用浏览器开发者工具

1. 打开 Chrome DevTools (F12)
2. 切换到 "Network" 标签
3. 刷新页面
4. 检查:
   - [ ] 页面加载时间 < 3秒
   - [ ] 首次内容绘制 < 2秒
   - [ ] 资源总大小合理
   - [ ] 没有404错误
   - [ ] 没有CORS错误

#### 使用 Lighthouse

1. 打开 Chrome DevTools (F12)
2. 切换到 "Lighthouse" 标签
3. 选择 "Desktop" 或 "Mobile"
4. 点击 "Analyze page load"
5. 检查分数:
   - [ ] Performance > 80
   - [ ] Accessibility > 90
   - [ ] Best Practices > 90
   - [ ] SEO > 90

### 10. 控制台错误检查

打开浏览器控制台 (F12 → Console)

- [ ] 没有红色错误信息
- [ ] 没有警告信息(或警告可以忽略)
- [ ] 没有网络请求失败

### 11. SEO 元素检查

#### 查看页面源代码 (右键 → 查看网页源代码)

- [ ] `<title>` 标签存在且有意义
- [ ] `<meta name="description">` 存在
- [ ] `<meta name="viewport">` 存在
- [ ] Open Graph 标签存在
- [ ] 结构化数据存在(JSON-LD)

#### 使用浏览器扩展

推荐安装:
- SEO Meta in 1 Click
- Open Graph Preview

### 12. 表单测试(如果有)

- [ ] 表单可以正常填写
- [ ] 必填字段验证正常
- [ ] 提交按钮可点击
- [ ] 提交后有反馈
- [ ] 错误提示清晰

### 13. 图片测试

- [ ] 所有图片正常加载
- [ ] 图片有 alt 属性
- [ ] 懒加载正常工作
- [ ] 图片尺寸合适

### 14. 链接测试

- [ ] 所有内部链接正常工作
- [ ] 外部链接在新标签打开
- [ ] 没有死链接
- [ ] 面包屑导航正常

## 🔧 常见问题排查

### 问题1: 页面空白

**可能原因:**
- JavaScript 错误
- 路由配置问题
- 组件加载失败

**排查步骤:**
1. 打开控制台查看错误
2. 检查 Network 标签是否有失败的请求
3. 确认 `src/main.ts` 正确挂载应用

### 问题2: API 请求失败

**可能原因:**
- 环境变量未配置
- Supabase 配置错误
- CORS 问题

**排查步骤:**
1. 检查 `.env` 文件
2. 确认 Supabase URL 和 Key 正确
3. 查看 Network 标签的请求详情

### 问题3: 样式显示异常

**可能原因:**
- CSS 文件未加载
- Tailwind 配置问题
- 组件样式冲突

**排查步骤:**
1. 检查 Network 标签 CSS 文件是否加载
2. 确认 `src/style.css` 存在
3. 检查浏览器控制台 CSS 警告

### 问题4: 图片不显示

**可能原因:**
- 图片路径错误
- 图片文件不存在
- 懒加载问题

**排查步骤:**
1. 检查 Network 标签图片请求
2. 确认图片在 `public` 目录
3. 检查图片路径是否正确

### 问题5: 路由404

**可能原因:**
- 路由未配置
- 路由路径错误
- 404页面未实现

**排查步骤:**
1. 检查 `src/router/index.ts`
2. 确认路由路径正确
3. 检查是否有 404 fallback

## 📊 性能优化建议

如果性能测试分数较低,可以:

1. **优化图片**
   ```bash
   # 压缩图片
   npm install -g imagemin-cli
   imagemin public/images/* --out-dir=public/images/optimized
   ```

2. **检查包大小**
   ```bash
   npm run build
   # 查看 dist 目录大小
   du -sh dist
   ```

3. **分析包内容**
   ```bash
   npm install -D rollup-plugin-visualizer
   # 在 vite.config.ts 中添加插件
   npm run build
   # 查看生成的 stats.html
   ```

## 🎯 测试通过标准

所有测试项都应该通过,特别是:

- ✅ 所有页面正常加载
- ✅ 所有导航链接工作
- ✅ 移动端体验良好
- ✅ 无控制台错误
- ✅ Lighthouse 分数 > 80
- ✅ 页面加载时间 < 3秒

## 📝 测试记录

建议记录测试结果:

```
测试日期: ____________________
测试人员: ____________________

基础功能: ☐ 通过 ☐ 失败
导航功能: ☐ 通过 ☐ 失败
知识库: ☐ 通过 ☐ 失败
案例库: ☐ 通过 ☐ 失败
情报局: ☐ 通过 ☐ 失败
资源库: ☐ 通过 ☐ 失败
工具: ☐ 通过 ☐ 失败
社区: ☐ 通过 ☐ 失败
移动端: ☐ 通过 ☐ 失败
性能: ☐ 通过 ☐ 失败

发现的问题:
1. ________________________________
2. ________________________________
3. ________________________________

总体评价: ☐ 可以部署 ☐ 需要修复
```

## 🚀 测试通过后

如果所有测试都通过,你可以:

1. **提交代码**
   ```bash
   git add .
   git commit -m "All tests passed, ready for deployment"
   ```

2. **准备部署**
   ```bash
   # 运行生产构建测试
   npm run build
   
   # 预览生产构建
   npm run preview
   ```

3. **开始部署**
   ```bash
   ./quick-deploy.sh
   ```

---

**祝测试顺利! 🎉**

如果遇到问题,请查看控制台错误信息,或参考项目文档。
